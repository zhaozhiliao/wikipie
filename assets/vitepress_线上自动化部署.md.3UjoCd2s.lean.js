import{_ as s,o as i,c as a,R as n}from"./chunks/framework.rW_MhUre.js";const t="/wikipie/assets/image-0.5oZCLto0.png",e="/wikipie/assets/image-2.FTgxMsiR.png",p="/wikipie/assets/image-1.j93nekJV.png",l="/wikipie/assets/image-3.wKEgf7Qp.png",h="/wikipie/assets/image-4.HSBi1hxO.png",k="/wikipie/assets/image-5.sWVrqjm5.png",A=JSON.parse('{"title":"线上自动化部署","description":"","frontmatter":{},"headers":[],"relativePath":"vitepress/线上自动化部署.md","filePath":"vitepress/线上自动化部署.md","lastUpdated":1702101623000}'),d={name:"vitepress/线上自动化部署.md"},r=n(`<h1 id="线上自动化部署" tabindex="-1">线上自动化部署 <a class="header-anchor" href="#线上自动化部署" aria-label="Permalink to &quot;线上自动化部署&quot;">​</a></h1><h2 id="简要说明" tabindex="-1">简要说明 <a class="header-anchor" href="#简要说明" aria-label="Permalink to &quot;简要说明&quot;">​</a></h2><p>本文主要用于记录如何在 github、vercel 和 netlify 上部署静态博客项目。最大的好处是无需服务器即可搭建网站，维护和运营成本较低。</p><p><strong>自定义域名托管服务比较</strong></p><p>以下是一些常见的自定义域名托管服务的比较，包括 Github Pages、Gitee Pages、GitLab Pages、Netlify、Vercel 和 Cloudflare Pages：</p><table><thead><tr><th>名称</th><th>自定义域名</th><th>限制</th><th>缺点</th></tr></thead><tbody><tr><td>Github Pages</td><td>支持</td><td>空间1G，100G/月</td><td>国内访问慢，百度不收录</td></tr><tr><td>Gitee Pages</td><td>收费</td><td>空间1G，100G/月</td><td>需实名，仓库审查</td></tr><tr><td>GitLab Pages</td><td>支持</td><td>-</td><td>国内访问慢</td></tr><tr><td>Netlify</td><td>支持</td><td>100G/月</td><td>从 GitHub、GitLab、BitBucket 拉取</td></tr><tr><td>Vercel</td><td>支持</td><td>100G/月</td><td>从 GitHub、GitLab、BitBucket 拉取</td></tr><tr><td>Cloudflare Pages</td><td>支持</td><td>-</td><td>从 GitHub、GitLab 拉取</td></tr></tbody></table><p>请注意，每个服务都有其独特的优势和限制。选择合适的服务取决于您的项目需求、性能要求和个人偏好。在做决定之前，建议仔细评估每个服务的特点。</p><h2 id="部署到-github-page-服务" tabindex="-1">部署到 Github Page 服务 <a class="header-anchor" href="#部署到-github-page-服务" aria-label="Permalink to &quot;部署到 Github Page 服务&quot;">​</a></h2><h3 id="创建-github-仓库" tabindex="-1">创建 Github 仓库 <a class="header-anchor" href="#创建-github-仓库" aria-label="Permalink to &quot;创建 Github 仓库&quot;">​</a></h3><p>这一步比较简单，直接在 <a href="https://github.com" target="_blank" rel="noreferrer">Github</a> 官网操作即可，该仓库用于存放项目文件，这里就不再赘述了。</p><h3 id="利用-github-actions" tabindex="-1">利用 GitHub Actions <a class="header-anchor" href="#利用-github-actions" aria-label="Permalink to &quot;利用 GitHub Actions&quot;">​</a></h3><p>GitHub Actions 是 GitHub 提供的一种自动化工作流服务。</p><p>首先在项目根目录下，创建 <code>.github/workflows/vitepress.yml</code>，这是 GitHub Actions 的配置文件，用于定义和配置 Vitepress 项目的自动化工作流。</p><p>该 YAML 文件主要包含了一系列指令和步骤，这些指令和步骤描述了 GitHub Actions 应该如何执行构建和部署 Vitepress 项目。</p><p>以下是我的 <code>vitepress.yml</code> 配置文件供你参考。将仓库名和仓库路径填入 <code>vitepress.yml</code> 中。</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GitHub Actions Build and Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 设置执行 GitHub Actions 的触发条件，当前为推送到 main 分支时触发构建</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build-and-deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #指定服务器的运行环境：最新版本 ubuntu</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 设置 GitHub Actions 中设置环境变量</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Set DEPLOY_ENV</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">echo &quot;DEPLOY_ENV=GH_PAGES&quot; &gt;&gt; $GITHUB_ENV</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 使用 actions/checkout@v4 库拉取代码到 ubuntu 上</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 根据网上资料查询此处可以设置为 false。https://github.com/actions/checkout</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          persist-credentials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 安装 pnpm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install pnpm</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm/action-setup@v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 设置 node 的版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Use Node.js</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 使用 actions/setup-node@v3 库安装 nodejs，with 提供了一个参数 node-version 表示要安装的 nodejs 版本</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18.x&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pnpm&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 打包成静态文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm install &amp;&amp; pnpm run docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 部署到 GitHub Pages - 也就是将打包内容发布到 GitHub Pages</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 自定义环境变量</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          github_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{secrets.your secrets Token}}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          publish_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./docs/.vitepress/dist</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 请根据您的实际情况调整路径</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 指定仓库：你要发布的仓库路径名</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          repository-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Your repositories/Your project</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 部署到 deploy-pages 分支，也就是部署后提交到那个分支</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          branch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deploy-pages</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 填写打包好的目录名称路径，本项目配置在根目录</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          folder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dist</span></span></code></pre></div><p>每次你更新代码后，系统会自动给你打包上传并部署</p><h3 id="设置-your-secrets-token" tabindex="-1">设置 your secrets Token <a class="header-anchor" href="#设置-your-secrets-token" aria-label="Permalink to &quot;设置 your secrets Token&quot;">​</a></h3><p>上面 <code>vitepress.yml</code> 需要用到 <code>secrets Token</code>，按以下步骤创建即可。</p><ol><li><p>生成 <code>DeveloperToken</code></p><p>首先进入个人账户 setting 设置页面，点击 Developer settings，选择 Personal access tokens-Tokens （classic），创建 <code>token</code>。 这里要设置有效期和仓库读写权限。</p><p><img src="`+t+'" alt="Alt text"></p><p>注意，创建完成后，记住这个值</p><p><img src="'+e+'" alt="Alt text"></p></li><li><p>设置 <code>Actions secrets</code></p><p>首先进入仓库 setting 页面，点击 Secrets and variables，选择 Actions，点击 New repository secret 进行创建。</p><p><img src="'+p+'" alt="Alt text"></p></li><li><p>将生成的 <code>Repository secrets</code>, 替换 <code>your secrets Token</code></p><p><img src="'+l+`" alt="Alt text"></p></li></ol><h3 id="推送项目到仓库" tabindex="-1">推送项目到仓库 <a class="header-anchor" href="#推送项目到仓库" aria-label="Permalink to &quot;推送项目到仓库&quot;">​</a></h3><ol><li><p>创建 <code>.gitignore</code> 文件</p><p>在根目录下创建 <code>.gitignore</code> 文件，忽略特定文件夹，不上传到仓库。参考</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>node_modules/</span></span>
<span class="line"><span>dist/</span></span>
<span class="line"><span>pnpm-lock.yaml</span></span></code></pre></div></li><li><p>初始化本地仓库</p><p>打开终端（命令行界面），进入你的项目目录，并执行以下命令初始化本地仓库：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span></code></pre></div></li><li><p>添加远程仓库地址</p><p>执行以下命令，将你的远程仓库地址添加为本地仓库的远程地址：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/YourRepositoriesAddress.git</span></span></code></pre></div><p>注意，请替换 <code>YourRepositoriesAddress</code> 为你的实际仓库地址。</p></li><li><p>添加文件，提交变更（依次执行）</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Initial commit&quot;</span></span></code></pre></div></li><li><p>推送到远程仓库</p><p>执行以下命令，将本地仓库的内容推送到远程仓库：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span></code></pre></div><p>如果你的默认分支是 <code>main</code>，如果是其他分支，请将上述命令中的 <code>main</code> 替换为你的默认分支名称。 以上步骤完成后，你的项目文件就会被推送到 GitHub 仓库中。之后，GitHub Actions 就会开始执行你配置的构建和部署任务。如果一切顺利，你的 VitePress 项目就会成功部署到 GitHub Pages。</p></li></ol><h3 id="设置-github-pages-服务" tabindex="-1">设置 GitHub Pages 服务 <a class="header-anchor" href="#设置-github-pages-服务" aria-label="Permalink to &quot;设置 GitHub Pages 服务&quot;">​</a></h3><p>进入项目仓库 setting 设置页，点击 pages，选择 branch 分支，根据我们的设置，部署完成后，项目生成的静态文件会存放到 gh-pages 分支下，因此需要将分支更改为 gh-pages。点击 save 保存。</p><p>至此，刷新页面，则生成了网站地址，可以进行访问了。也可以根据自己需要，自定义自己的域名。</p><h3 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h3><ol><li><p>访问网站发现样式丢失</p><p>这种情况需要检查你项目下，docs/.vitepress/config.mjs 文件。调整 base 的值。</p><div class="language-mjs vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mjs</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>import { defineConfig } from &#39;vitepress&#39;</span></span>
<span class="line"><span>export default defineConfig ({</span></span>
<span class="line"><span> base: &#39;/YourRepositoryName/&#39;,  // 在 GitHub Pages 上部署时的基本路径</span></span>
<span class="line"><span> })</span></span></code></pre></div></li></ol><h2 id="部署到-vercel" tabindex="-1">部署到 Vercel <a class="header-anchor" href="#部署到-vercel" aria-label="Permalink to &quot;部署到 Vercel&quot;">​</a></h2><p><a href="https://vercel.com/" target="_blank" rel="noreferrer">Vercel 官方地址</a></p><p>在 Github 中新建一个仓库，然后将自己的博客系统代码提交到仓库中，这一步相信大家都会操作我就不重复了吧。在这一步将代码提交到 Github 的目的就是与 Vercel 关联，项目在 Vercel 中部署之后以后更新你的博客内容只需要将代码提交到 Github 中，然后 Vercel 就能实现自动部署。</p><ol><li>首先需要使用你自己的 Github 账号来登录 Vercel</li><li>点击新建项目来添加 Github 中的项目，选择对应的项目</li><li>点击导入按钮来导入要部署的项目</li><li>部署的配置一般使用默认的就行，输出的目录要改一下 <code>docs/.vitepress/dist</code></li><li>点击部署按钮开始部署等一会儿就部署好了，只要你在本地运行 <code>pnpm run docs:build</code> 命令能够打包成功那么部署也基本上没有问题的</li><li>部署成功之后 Vercel 会给你分配一个默认的域名，通过这个域名就能访问到自己的博客网站</li></ol><h2 id="部署到-netlify" tabindex="-1">部署到 Netlify <a class="header-anchor" href="#部署到-netlify" aria-label="Permalink to &quot;部署到 Netlify&quot;">​</a></h2><p><a href="https://netlify.com/" target="_blank" rel="noreferrer">Netlify 官方地址</a></p><p>使用 netlify 进行部署，和 vercel 基本一致，也要注意是否需要配置环境变量。 netlify 需要手动填写配置命令，示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>pnpm run docs:build</span></span>
<span class="line"><span>docs/.vitepress/dist</span></span></code></pre></div><p><img src="`+h+`" alt="Alt text"></p><h2 id="环境变量问题" tabindex="-1">环境变量问题 <a class="header-anchor" href="#环境变量问题" aria-label="Permalink to &quot;环境变量问题&quot;">​</a></h2><p>为了同时支持 Vercel、Netlify 和 GitHub Pages，您可以采取一些通用的配置策略，以确保在不同的部署平台上都能够正确地访问您的 VitePress 项目。以下是一些建议：</p><p>在 <code>vitepress/config.js</code> 或 <code>vitepress/config.ts</code> 中，您可以根据部署平台设置不同的<code>base</code>：</p><div class="language-mjs vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mjs</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>import { defineConfig } from &#39;vitepress&#39;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>export default defineConfig({</span></span>
<span class="line"><span>  base: process.env.DEPLOY_ENV === &#39;VERCEL&#39;</span></span>
<span class="line"><span>    ? &#39;/wikipie/&#39;  // 在 Vercel 上部署时的基本路径</span></span>
<span class="line"><span>    : process.env.DEPLOY_ENV === &#39;NETLIFY&#39;</span></span>
<span class="line"><span>      ? &#39;/&#39;  // 在 Netlify 上部署时的基本路径</span></span>
<span class="line"><span>      : &#39;/wikipie/&#39;,  // 在 GitHub Pages 上部署时的基本路径</span></span>
<span class="line"><span>  // 其他配置...</span></span>
<span class="line"><span>})</span></span></code></pre></div><p>在上述示例中，我们使用了一个名为<code>DEPLOY_ENV</code>的环境变量，通过这个变量的值来确定部署环境。您可以在 GitHub Actions、Vercel 和 Netlify 中设置这个环境变量。</p><p><strong>在 GitHub Actions 中设置环境变量：</strong> 在您的 GitHub Actions workflow 文件中添加一个步骤来设置环境变量。</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Set DEPLOY_ENV</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">echo &quot;DEPLOY_ENV=GH_PAGES&quot; &gt;&gt; $GITHUB_ENV</span></span></code></pre></div><p><strong>在 Vercel 中设置环境变量：</strong> 在 Vercel 控制台的项目设置中，找到 &quot;Build &amp; Development Settings&quot; 部分，添加一个名为<code>DEPLOY_ENV</code>的环境变量，并设置其值为<code>VERCEL</code>。</p><p><strong>在 Netlify 中设置环境变量：</strong> 在 Netlify 控制台的项目设置中，找到 &quot;Build &amp; Deploy&quot; 部分，添加一个名为 <code>DEPLOY_ENV</code>的环境变量，并设置其值为<code>NETLIFY</code>。</p><p><img src="`+k+'" alt="Alt text"></p><p>这样，通过在不同的部署平台上设置不同的<code>DEPLOY_ENV</code>环境变量，您的 VitePress 项目就可以在不同的环境中正确地设置<code>base</code>，以支持各种部署方案。</p>',47),o=[r];function c(g,E,y,u,b,F){return i(),a("div",null,o)}const v=s(d,[["render",c]]);export{A as __pageData,v as default};
